(this.webpackJsonpmachine_status_management=this.webpackJsonpmachine_status_management||[]).push([[0],{277:function(e,t,n){e.exports={custom_form:"LoginForm_custom_form__1IEDK"}},667:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),s=n.n(a),c=n(28),o=n.n(c),i=n(23),l=n(43),u=n(464),d=n(53),h=n(24),p=n(25),j=n(27),b=n(26),m=n(33),O=n(16),f=n.n(O),v=n(30),x=n(87),g=Object(x.a)(),y="CREATE_STREAM",k="FETCH_STREAMS",S="FETCH_STREAM",N="DELETE_STREAM",w="EDIT_STREAM",_="LOG_IN",A="LOG_OUT",T="USER_LOG_IN",I="USER_LOG_OUT",E="USER_GROUPS",U="REFRESH_TOKEN",C="CREATE_USER",L="FETCH_USERS",D="FETCH_USER",F="DELETE_USER",P="EDIT_USER",R="FETCH_SECTIONS",M="FETCH_MACHINES",B="BLOCK_UNBLOCK_USER",z="LIVE_STATUS",H="FILTERED_DATA",Y="IS_FETCHING",G="IS_FETCHED",K=n(129),V=n.n(K),W=V.a.create({baseURL:"https://securetoken.googleapis.com/v1/token?key=AIzaSyBx8sGQIsXKs4Ea6gAAC7BPkr8yFO6LZ_U"}),X=n(136);n(507);X.a.configure();var q=function(e){X.a.success("".concat(e),{position:X.a.POSITION.TOP_RIGHT,autoClose:4e3})},J=function(e){X.a.error("".concat(e),{position:X.a.POSITION.TOP_RIGHT,autoClose:4e3})},Q=function(e){X.a.info("".concat(e),{position:X.a.POSITION.TOP_RIGHT,autoClose:4e3})},Z=function(){var e=Object(v.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info("called refresh token method"),localStorage.getItem("refreshToken")){e.next=5;break}g.push("/htecmms/phone-login"),e.next=10;break;case 5:return t={grant_type:"refresh_token",refresh_token:localStorage.getItem("refreshToken")},e.next=8,W.post("",t);case 8:200===(n=e.sent).status&&(localStorage.setItem("refreshToken",n.data.refresh_token),localStorage.setItem("idToken",n.data.id_token));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){return function(e){console.log("Entered into login action"),e({type:T}),q("Login Success!"),g.push("/htecmms")}},ee=function(){return function(e){localStorage.getItem("idToken")&&q("Logged out successfully!"),e({type:I})}},te=n(10),ne=V.a.create({baseURL:"http://localhost:3001/"}),re=function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.get("/streams/".concat(e));case 2:r=t.sent,n({type:S,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ae=function(e){return Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"content",children:Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:"card strpied-tabled-with-hover",children:[Object(r.jsxs)("div",{className:"card-header ",children:[Object(r.jsx)("h4",{className:"card-title",children:e.title}),Object(r.jsx)("p",{className:"card-category",children:e.subtitle})]}),Object(r.jsx)("div",{className:"card-body table-full-width table-responsive",children:Object(r.jsxs)("table",{className:"table table-hover table-striped",children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:e.headers.map((function(e,t){return Object(r.jsx)("th",{children:e},t)}))})}),Object(r.jsx)("tbody",{children:e.values})]})})]})})})})})})})})},se=n(204),ce=n.n(se),oe=function(){return Object(r.jsx)("div",{className:"text-center",children:Object(r.jsx)("div",{className:"spinner-border m-5 text-info",style:{width:"4rem",height:"4rem"},role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})})},ie=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderContent=function(){if(e.props.isLoading)return Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"card",children:Object(r.jsx)("div",{className:"card-body",children:Object(r.jsx)(oe,{})})})});if(void 0===e.props.data.records||0===e.props.data.records.length)return Object(r.jsx)("div",{className:"text-center",children:"No Data Available"});var t=e.props.data,n="Total On Time: ".concat(t.total_on_time," minutes, Total Off Time: ").concat(t.total_off_time," minutes, Utilization: ").concat(t.utilization,"%");return Object(r.jsx)(ce.a,{title:n,columns:[{title:"Section",field:"section_name"},{title:"Machine",field:"machine_name"},{title:"Status",field:"status"},{title:"Date",field:"date"},{title:"Start Time",field:"start_at"},{title:"End Time",field:"end_at"},{title:"Duration",field:"duration"}],data:e.props.data.records,options:{exportButton:!0,exportAllData:!0,paging:!0,pageSize:10,pageSizeOptions:[10,20,50,100],paginationType:"stepped"}})},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"card",children:Object(r.jsx)("div",{className:"card-body",children:this.renderContent()})})})}}]),n}(s.a.Component),le=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"renderList",value:function(){return this.props.streams.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.id}),Object(r.jsx)("td",{children:e.title}),Object(r.jsx)("td",{children:e.description}),Object(r.jsx)("td",{children:Object(r.jsx)(m.a,{to:"/streams/edit/".concat(e.id),className:"btn btn-primary",children:"Edit"})}),Object(r.jsx)("td",{children:Object(r.jsx)(m.a,{to:"/streams/delete/".concat(e.id),className:"btn btn-danger",children:"Delete"})})]},t)}))}},{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)(ie,{})}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),ue=(Object(i.b)((function(e){return{streams:Object.values(e.streams.results),isAuthenticated:e.fbAuth.isUserAuthenticated}}),{fetchStreams:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.get("/streams");case 2:n=e.sent,t({type:k,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(le),n(706)),de=n(704),he=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderInput=function(t){var n=t.input,a=t.label,s=t.type,c=t.meta,o="form-group ".concat(c.error&&c.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:o,children:[Object(r.jsx)("label",{children:a}),Object(r.jsx)("input",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",type:s})),e.renderError(c)]})})})},e.onSubmit=function(t){e.props.onSubmit(t)},e}return Object(p.a)(n,[{key:"renderError",value:function(e){if(e.touched&&e.error)return Object(r.jsx)("div",{className:"ui error message",children:Object(r.jsx)("div",{className:"header",children:e.error})})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h4",{className:"card-title",children:"Edit Profile"})}),Object(r.jsx)("div",{className:"card-body",children:Object(r.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(r.jsx)(ue.a,{name:"title",component:this.renderInput,label:"Title",type:"text"}),Object(r.jsx)(ue.a,{name:"description",component:this.renderInput,label:"Description",type:"text"}),Object(r.jsx)("button",{className:"btn btn-info btn-fill pull-right",type:"submit",children:"Submit"})]})})]})})})})}}]),n}(s.a.Component),pe=Object(de.a)({form:"ProjectForm",validate:function(e){var t={};return e.title||(t.title="You must entry a title"),e.description||(t.description="You must entry a description"),t}})(he),je=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.createStream(t)},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)(pe,{onSubmit:this.onSubmit})})}}]),n}(s.a.Component),be=Object(i.b)(null,{createStream:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.post("/streams",Object(te.a)({},e));case 2:201===(a=t.sent).status&&q("Stream Creation Succeed!"),n({type:y,payload:a.data}),g.push("/");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(je),me=n(113),Oe=n.n(me),fe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.editStream(e.props.match.params.id,t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"render",value:function(){if(console.log("edit form.. stream: ",this.props.stream),!this.props.stream)return Object(r.jsx)("div",{children:"Loading"});var e=Oe.a.pick(this.props.stream,"title","description");return console.log("initial values: ",e),Object(r.jsx)(pe,{onSubmit:this.onSubmit,initialValues:Oe.a.pick(this.props.stream,"title","description")})}}]),n}(s.a.Component),ve=Object(i.b)((function(e,t){return console.log("streams: ",e.streams.results),console.log("id: ",t.match.params.id),console.log("result: ",e.streams.results[t.match.params.id]),{stream:e.streams.results[t.match.params.id]}}),{fetchStream:re,editStream:function(e,t){return function(){var n=Object(v.a)(f.a.mark((function n(r){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne.patch("/streams/".concat(e),t);case 2:a=n.sent,r({type:w,payload:a.data}),q("Updated Successfully!"),g.push("/");case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(fe),xe=n(703),ge=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){console.log("stream: ",e.props.stream),e.props.deleteStream(e.props.match.params.id)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStream(this.props.match.params.id)}},{key:"renderActions",value:function(){return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("button",{className:"btn btn-danger",onClick:this.onSubmit,children:"Delete"}),Object(r.jsx)(m.a,{to:"/",className:"btn btn-secondary",children:"Cancel"})]})}},{key:"renderContent",value:function(){return this.props.stream?"Are you sure you want to delete this title: ".concat(this.props.stream.title):"Are you sure you want to delete?"}},{key:"render",value:function(){return Object(r.jsxs)(xe.a,{show:!0,onHide:function(){return g.push("/")},children:[Object(r.jsx)(xe.a.Header,{children:"Delete Stream"}),Object(r.jsx)(xe.a.Body,{children:this.renderContent()}),Object(r.jsx)(xe.a.Footer,{children:this.renderActions()})]})}}]),n}(s.a.Component),ye=Object(i.b)((function(e,t){return{stream:e.streams.results[t.match.params.id]}}),{fetchStream:re,deleteStream:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne.delete("/streams/".concat(e));case 2:n({type:N,payload:e}),g.push("/"),q("Stream has been deleted successfully!");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ge),ke=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:"Details Page"})}}]),n}(s.a.Component),Se=V.a.create({baseURL:"".concat("http://18.139.108.14","/api/v1")}),Ne=n(277),we=n.n(Ne),_e=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderInput=function(t){var n=t.input,a=t.label,s=t.type,c=t.meta,o="form-group ".concat(c.error&&c.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:o,children:[Object(r.jsx)("label",{children:a}),Object(r.jsx)("input",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",type:s})),e.renderError(c)]})})})},e.onSubmit=function(t){e.props.userLogin(t)},e}return Object(p.a)(n,[{key:"renderError",value:function(e){if(e.touched&&e.error)return Object(r.jsx)("div",{className:"ui error message",children:Object(r.jsx)("div",{className:"header",children:e.error})})}},{key:"render",value:function(){return localStorage.getItem("token")&&g.push("/"),Object(r.jsx)("div",{className:"container-fluid",id:we.a.custom_form,children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-6 align-content-md-center",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h4",{className:"card-title",children:"User Login"})}),Object(r.jsx)("div",{className:"card-body",children:Object(r.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(r.jsx)(ue.a,{name:"username",component:this.renderInput,label:"Username",type:"text"}),Object(r.jsx)(ue.a,{name:"password",component:this.renderInput,label:"Password",type:"password"}),Object(r.jsx)("button",{className:"btn btn-info btn-fill pull-right",type:"submit",children:"Submit"})]})})]})})})})}}]),n}(s.a.Component),Ae=Object(de.a)({form:"LoginForm",validate:function(e){var t={};return e.username||(t.username="You must entry your username!"),e.password||(t.password="You must entry your password"),t}})(_e),Te=Object(i.b)(null,{userLogin:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se.post("/users/token/",Object(te.a)({},e));case 3:a=t.sent,console.log("request: ",a.status),200===a.status&&q("Login Success!"),n({type:_,payload:a.data}),g.push("/htecmms"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),J("Credential Mismatched...! Try Again..!");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()}})(Ae),Ie=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){e.props.userLogOutWithPhone(),g.push("/htecmms")},e}return Object(p.a)(n,[{key:"renderActions",value:function(){return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(m.a,{to:"/htecmms",className:"btn btn-secondary",children:"Cancel"}),Object(r.jsx)("button",{className:"btn btn-danger",onClick:this.onSubmit,children:"Logout"})]})}},{key:"renderContent",value:function(){return"Are you sure you want to Logout?"}},{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsxs)(xe.a.Dialog,{children:[Object(r.jsx)(xe.a.Header,{closeButton:!0,children:"Logout"}),Object(r.jsx)(xe.a.Body,{children:this.renderContent()}),Object(r.jsx)(xe.a.Footer,{children:this.renderActions()})]}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),Ee=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated}}),{userLogOutWithPhone:ee})(Ie),Ue=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isToggled:!1},e.onToggleHandler=function(){e.setState({isToggled:!e.state.isToggled})},e}return Object(p.a)(n,[{key:"renderLogin",value:function(){return this.props.isAuthenticated?Object(r.jsx)(m.a,{className:"nav-link",to:"/htecmms/logout",children:Object(r.jsx)("span",{className:"no-icon",children:"Log out"})}):Object(r.jsx)(m.a,{className:"nav-link",to:"/htecmms/phone-login",children:Object(r.jsx)("span",{className:"no-icon",children:"Login"})})}},{key:"render",value:function(){var e=this.state.isToggled;return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)("nav",{className:"navbar navbar-expand-lg ",children:Object(r.jsxs)("div",{className:"container-fluid",children:[Object(r.jsx)(m.a,{className:"navbar-brand",to:"/htecmms",children:" Dashboard "}),Object(r.jsxs)("button",{onClick:this.onToggleHandler,className:"navbar-toggler navbar-toggler-right"+(e?" toggled":""),type:"button","data-toggle":"collapse","aria-controls":"navigation-index","aria-expanded":"false","aria-label":"Toggle navigation",children:[Object(r.jsx)("span",{className:"navbar-toggler-bar burger-lines"}),Object(r.jsx)("span",{className:"navbar-toggler-bar burger-lines"}),Object(r.jsx)("span",{className:"navbar-toggler-bar burger-lines"})]}),Object(r.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navigation",children:Object(r.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(m.a,{className:"nav-link",to:"/shafik",children:this.props.isUserAuthenticated?Object(r.jsx)("span",{className:"no-icon",children:"Account"}):Object(r.jsx)("span",{className:"no-icon",children:localStorage.getItem("name")})})}),Object(r.jsx)("li",{className:"nav-item",children:this.renderLogin()})]})})]})})})}}]),n}(s.a.Component),Ce=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated}}),{userLoginWithPhone:$,userLogOutWithPhone:ee})(Ue),Le=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"renderSideBarMenu",value:function(){return this.props.isAuthenticated?Object(r.jsxs)("ul",{className:"nav",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(m.a,{className:"nav-link",to:"/#",onClick:function(e){return e.preventDefault()},children:[Object(r.jsx)("i",{className:"nc-icon nc-chart-pie-35"}),Object(r.jsx)("p",{children:"Dashboard"})]})}),localStorage.getItem("group")&&"DEV-ADMIN"===localStorage.getItem("group")?Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(m.a,{className:"nav-link",to:"/htecmms/users",children:[Object(r.jsx)("i",{className:"nc-icon nc-circle-09"}),Object(r.jsx)("p",{children:"Users Management"})]})}):null,Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(m.a,{className:"nav-link",to:"/htecmms/machines/data",children:[Object(r.jsx)("i",{className:"nc-icon nc-notes"}),Object(r.jsx)("p",{children:"Data"})]})})]}):null}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"sidebar","data-color":"grey",children:Object(r.jsxs)("div",{className:"sidebar-wrapper",children:[Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)(m.a,{to:"/#",className:"simple-text",children:"HTEC"})}),this.renderSideBarMenu()]})})}}]),n}(s.a.Component),De=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated}}))(Le),Fe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(r.jsx)("footer",{className:"footer",children:Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsxs)("nav",{children:[Object(r.jsxs)("ul",{className:"footer-menu",children:[Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"/#",children:"Home"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"/#",children:"Company"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"/#",children:"Portfolio"})}),Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:"/#",children:"Blog"})})]}),Object(r.jsxs)("p",{className:"copyright text-center",children:["\xa9",Object(r.jsx)("script",{children:"document.write(new Date().getFullYear())"}),Object(r.jsx)("a",{href:"https://www.linkedin.com/in/shafikte/",target:"_blank",rel:"noopener noreferrer",children:"MSI Shafik"}),", made with love for a better web"]})]})})})}}]),n}(s.a.Component),Pe=n(700),Re=n(342);n(663);Re.a.initializeApp({apiKey:"AIzaSyBx8sGQIsXKs4Ea6gAAC7BPkr8yFO6LZ_U",authDomain:"machine-status-dev.firebaseapp.com",projectId:"machine-status-dev",storageBucket:"machine-status-dev.appspot.com",messagingSenderId:"775493256846",appId:"1:775493256846:web:07c0ec9bba3eb29ef2abdf",measurementId:"G-L3EJ9VVW5S"});var Me=Re.a,Be=V.a.create({baseURL:"https://htecmms.herokuapp.com/api/v1"}),ze=function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.post("/users/checking/",{username:t});case 2:if(200!==(n=e.sent).status){e.next=6;break}return console.log("data: ",n.data),e.abrupt("return",n.data);case 6:return e.abrupt("return",{is_exists:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={has_submit:!1,has_success:!1,has_otp_submit:!0},e.renderInput=function(t){var n=t.input,a=t.label,s=t.type,c=t.meta,o="form-group ".concat(c.error&&c.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:o,children:[Object(r.jsx)("label",{children:a}),Object(r.jsx)("input",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",type:s})),e.renderError(c)]})})})},e.renderButton=function(t){return e.state.has_submit&&e.state.has_otp_submit?Object(r.jsxs)("button",{className:"btn btn-info btn-fill pull-right",disabled:!0,children:[Object(r.jsx)(Pe.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Verifying...."]}):Object(r.jsx)("button",{className:"btn btn-info btn-fill pull-right",type:"submit",children:t})},e.renderContent=function(){return e.state.has_success?Object(r.jsxs)("form",{onSubmit:e.props.handleSubmit(e.onOTPSubmit),children:[Object(r.jsx)(ue.a,{name:"otp",component:e.renderInput,label:"OTP",type:"number"}),e.renderButton("Submit")]}):Object(r.jsxs)("form",{onSubmit:e.props.handleSubmit(e.onSubmit),children:[Object(r.jsx)("div",{id:"recaptcha-container"}),Object(r.jsx)(ue.a,{name:"username",component:e.renderInput,label:"Phone Number",type:"text"}),e.renderButton("Verify")]})},e.settUpRecaptcha=function(){window.recaptchaVerifier=new Me.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){console.log("Captcha Resolved")},defaultCountry:"BD"})},e.onSubmit=function(t){e.setState({has_submit:!0});var n="+88"+t.username;ze(n).then((function(t){if(!t.is_exists)return J("User Doesn't Exists!"),e.setState({has_submit:!1}),null;localStorage.setItem("name",t.name),localStorage.setItem("group",t.group),e.settUpRecaptcha();var r=window.recaptchaVerifier;Me.auth().signInWithPhoneNumber(n,r).then((function(t){console.log("message has been sent!"),window.confirmationResult=t,Q("OTP has been sent!"),e.setState({has_success:!0,has_otp_submit:!1})})).catch((function(e){J("Error! Try again.")}))})).catch((function(e){J("Network Error!"),console.log("Error: ",e)}))},e.onOTPSubmit=function(t){e.setState({has_submit:!0,has_otp_submit:!0}),console.log("submitted OTP: ",t.otp);var n=t.otp;window.confirmationResult.confirm(n).then((function(t){var n=t.user;localStorage.setItem("refreshToken",n.refreshToken),n.getIdToken().then((function(e){localStorage.setItem("idToken",e)})).catch((function(e){console.log("token error: ",e),J("Error! Try again.")})),e.props.userLoginWithPhone()})).catch((function(t){e.setState({has_otp_submit:!1}),console.log("submition error: ",t),J("Error! Try again.")}))},e}return Object(p.a)(n,[{key:"renderError",value:function(e){if(e.touched&&e.error)return Object(r.jsx)("div",{className:"ui error message",children:Object(r.jsx)("div",{className:"header",children:e.error})})}},{key:"render",value:function(){return this.props.isAuthenticated&&g.push("/htecmms"),Object(r.jsx)("div",{className:"container-fluid",id:we.a.custom_form,children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-6 align-content-md-center",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h4",{className:"card-title",children:"User Login with Phone Number"})}),Object(r.jsx)("div",{className:"card-body",children:this.renderContent()})]})})})})}}]),n}(s.a.Component),Ye=Object(de.a)({form:"FLoginForm",validate:function(e){var t={};return e.username||(t.username="You must entry your username!"),e.username&&11!==e.username.length&&(t.username="You must entry 11 digit phone number!"),t}})(He),Ge=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated}}),{userLoginWithPhone:$})(Ye),Ke=n(705),Ve=n(701),We=function(){return function(){var e=Object(v.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.get("/users/groups",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:r=e.sent,t({type:E,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.get("/users/groups",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:n=e.sent,t({type:E,payload:n.data});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){J("Network Error!")}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},Xe=function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.get("/users/".concat(e,"/"),{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:a=t.sent,n({type:D,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&401===t.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be.get("/users/".concat(e,"/"),{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:r=t.sent,n({type:D,payload:r.data});case 4:case"end":return t.stop()}}),t)})))).catch((function(e){J("Network Error!")}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()},qe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"renderList",value:function(){return this.props.users.map((function(e,t){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.employee_id}),Object(r.jsx)("td",{children:e.name}),Object(r.jsx)("td",{children:e.username}),Object(r.jsx)("td",{children:e.group_name}),Object(r.jsx)("td",{children:e.section_name}),Object(r.jsx)("td",{children:e.is_blocked?"Blocked":"Active"}),Object(r.jsx)("td",{children:Object(r.jsx)(m.a,{to:"/htecmms/users/edit/".concat(e.id),className:"btn btn-primary",children:"Edit"})}),Object(r.jsx)("td",{children:Object(r.jsx)(m.a,{to:"/htecmms/users/block-unblock/".concat(e.id),className:"btn btn-warning",children:e.is_blocked?"Unblock":"Block"})}),Object(r.jsx)("td",{children:Object(r.jsx)(m.a,{to:"/htecmms/users/delete/".concat(e.id),className:"btn btn-danger",children:"Delete"})})]},t)}))}},{key:"render",value:function(){return this.props.isAuthenticated?this.props.users?Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)(ae,{title:"User Lists",subtitle:"Lists of active and blocked users",headers:["Employee Id","Name","Phone","Permission","Section","Status","Update","Action","Action"],values:this.renderList()})}):Object(r.jsx)(oe,{}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),Je=Object(i.b)((function(e){return{users:e.users.results,isAuthenticated:e.fbAuth.isUserAuthenticated}}),{fetchUsers:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.get("/users",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:r=e.sent,t({type:L,payload:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.get("/users",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:n=e.sent,t({type:L,payload:n.data});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){J("Network Error!")}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()}})(qe),Qe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderUserGroup=function(t){var n=t.input,a=t.label,s=t.meta,c="form-group ".concat(s.error&&s.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:c,children:[Object(r.jsx)("label",{children:a}),Object(r.jsxs)("select",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",children:[Object(r.jsx)("option",{disabled:!0,value:"",children:" -- select an option -- "}),e.props.groups.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.name},e.id)}))]})),e.renderError(s)]})})})},e.renderSection=function(t){var n=t.input,a=t.label,s=t.meta,c="form-group ".concat(s.error&&s.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:c,children:[Object(r.jsx)("label",{children:a}),Object(r.jsxs)("select",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",children:[Object(r.jsx)("option",{disabled:!0,value:"",children:" -- select an option -- "}),e.props.sections.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.name},e.id)}))]})),e.renderError(s)]})})})},e.renderInput=function(t){var n=t.input,a=t.label,s=t.type,c=t.meta,o="form-group ".concat(c.error&&c.touched?"has-error has-feedback":"has-feedback");return Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:o,children:[Object(r.jsx)("label",{children:a}),e.props.is_update&&"Phone"===a?Object(r.jsx)("input",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",type:s,disabled:!0})):Object(r.jsx)("input",Object(te.a)(Object(te.a)({},n),{},{className:"form-control",type:s})),e.renderError(c)]})})})},e.onSubmit=function(t){e.props.onSubmit(t),console.log("form values: ",t)},e}return Object(p.a)(n,[{key:"renderError",value:function(e){if(e.touched&&e.error)return Object(r.jsx)("div",{className:"ui error message",children:Object(r.jsx)("div",{className:"header",children:e.error})})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h4",{className:"card-title",children:"Edit Profile"})}),Object(r.jsx)("div",{className:"card-body",children:Object(r.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(r.jsx)(ue.a,{name:"username",component:this.renderInput,label:"Phone",type:"text"}),Object(r.jsx)(ue.a,{name:"name",component:this.renderInput,label:"Name",type:"text"}),Object(r.jsx)(ue.a,{name:"employee_id",component:this.renderInput,label:"Employee ID",type:"text"}),Object(r.jsx)(ue.a,{name:"user_group",component:this.renderUserGroup,label:"Permission",type:"select"}),Object(r.jsx)(ue.a,{name:"section",component:this.renderSection,label:"Section",type:"select"}),Object(r.jsx)("button",{className:"btn btn-info btn-fill pull-right",type:"submit",children:"Submit"})]})})]})})})})}}]),n}(s.a.Component),Ze=Object(de.a)({form:"UserForm",validate:function(e){var t={};return e.username||(t.username="You must entry a phone number"),e.name||(t.name="You must entry a name"),e.employee_id||(t.employee_id="You must entry a employee id"),e.user_group||(t.user_group="You must select user permission group"),e.section||(t.section="You must select user section"),t}})(Qe),$e=function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.get("/company/sections",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:n=e.sent,console.log("section result: ",n.data),t({type:R,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.get("/company/sections",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:n=e.sent,t({type:R,payload:n.data});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){J("Network Error!")}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},et=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.createUser(t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getUserGroup(),this.props.getSections()}},{key:"render",value:function(){return this.props.isAuthenticated?this.props.groups&&this.props.sections?Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)(Ze,{onSubmit:this.onSubmit,groups:this.props.groups,sections:this.props.sections})}):Object(r.jsx)(oe,{}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),tt=Object(i.b)((function(e){return{groups:e.users.groups,sections:e.company.sections,isAuthenticated:e.fbAuth.isUserAuthenticated}}),{createUser:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n,r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Be.post("/users/",Object(te.a)({},e),{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:201===(a=t.sent).status&&q("Stream Creation Succeed!"),n({type:C,payload:a.data}),g.push("/htecmms/users"),window.location.reload(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response&&401===t.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be.post("/users/",Object(te.a)({},e),{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:201===(r=t.sent).status&&q("Stream Creation Succeed!"),n({type:C,payload:r.data}),g.push("/htecmms/users");case 6:case"end":return t.stop()}}),t)})))).catch((function(e){J("Network Error!")})),J("Error Creating New User!");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},getUserGroup:We,getSections:$e})(et),nt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsx)(s.a.Fragment,{children:Object(r.jsxs)(Ke.a,{defaultActiveKey:"users",children:[Object(r.jsx)(Ve.a,{eventKey:"users",title:"Users List",children:Object(r.jsx)(Je,{})}),Object(r.jsx)(Ve.a,{eventKey:"create",title:"Create New User",children:Object(r.jsx)(tt,{})})]})}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),rt=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated}}))(nt),at=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.editUser(e.props.match.params.id,t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser(this.props.match.params.id),this.props.getUserGroup(),this.props.getSections()}},{key:"render",value:function(){if(!this.props.user||!this.props.groups||!this.props.sections)return Object(r.jsx)(oe,{});var e=Oe.a.pick(this.props.user,"username","name","employee_id");return Object(r.jsx)(Ze,{onSubmit:this.onSubmit,initialValues:e,groups:this.props.groups,sections:this.props.sections,is_update:!0})}}]),n}(s.a.Component),st=Object(i.b)((function(e,t){return{user:e.users.user,groups:e.users.groups,sections:e.company.sections}}),{fetchUser:Xe,editUser:function(e,t){return function(){var n=Object(v.a)(f.a.mark((function n(r){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Be.patch("/users/".concat(e,"/"),t,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:a=n.sent,r({type:P,payload:a.data}),q("Updated Successfully!"),g.push("/htecmms/users"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),n.t0.response&&401===n.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function n(){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Be.patch("/users/".concat(e),t,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:a=n.sent,r({type:P,payload:a.data}),q("Updated Successfully!"),g.push("/htecmms");case 6:case"end":return n.stop()}}),n)})))).catch((function(e){J("Network Error!")}));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},getUserGroup:We,getSections:$e})(at),ct=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.blockUnblockUser(e.props.match.params.id,t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser(this.props.match.params.id)}},{key:"renderActions",value:function(){var e=this;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(m.a,{to:"/htecmms/users",className:"btn btn-secondary",children:"Cancel"}),Object(r.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.onSubmit(!0)},children:"Block"})]})}},{key:"renderUnblockActions",value:function(){var e=this;return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(m.a,{to:"/htecmms/users",className:"btn btn-secondary",children:"Cancel"}),Object(r.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.onSubmit(!1)},children:"Unblock"})]})}},{key:"renderContent",value:function(){return this.props.user?"Are you sure you want to block : ".concat(this.props.user.name):"Are you sure you want to block?"}},{key:"renderUnblockContent",value:function(){return this.props.user?"Are you sure you want to Unblock: ".concat(this.props.user.name):"Are you sure you want to Unblock?"}},{key:"render",value:function(){return this.props.isAuthenticated?this.props.user?this.props.user.is_blocked?Object(r.jsxs)(xe.a,{show:!0,onHide:function(){return g.push("/htecmms/users")},children:[Object(r.jsx)(xe.a.Header,{children:"Unblock User"}),Object(r.jsx)(xe.a.Body,{children:this.renderUnblockContent()}),Object(r.jsx)(xe.a.Footer,{children:this.renderUnblockActions()})]}):Object(r.jsxs)(xe.a,{show:!0,onHide:function(){return g.push("/htecmms/users")},children:[Object(r.jsx)(xe.a.Header,{children:"Block User"}),Object(r.jsx)(xe.a.Body,{children:this.renderContent()}),Object(r.jsx)(xe.a.Footer,{children:this.renderActions()})]}):null:Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),ot=Object(i.b)((function(e,t){return{user:e.users.user,isAuthenticated:e.fbAuth.isUserAuthenticated}}),{fetchUser:Xe,blockUnblockUser:function(e,t){return function(){var n=Object(v.a)(f.a.mark((function n(r){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={is_blocked:t},n.next=4,Be.patch("/users/".concat(e,"/"),a,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 4:r({type:B}),q("Action Successful!"),g.push("/htecmms/users"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),n.t0.response&&401===n.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function n(){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={is_blocked:t},n.next=3,Be.patch("/users/".concat(e,"/"),a,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:r({type:B}),q("Action Successful!"),g.push("/htecmms/users");case 6:case"end":return n.stop()}}),n)})))).catch((function(e){J("Network Error!")}));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}})(ct),it=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){e.props.deleteUser(e.props.match.params.id)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchUser(this.props.match.params.id)}},{key:"renderActions",value:function(){return Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)(m.a,{to:"/htecmms/users",className:"btn btn-secondary",children:"Cancel"}),Object(r.jsx)("button",{className:"btn btn-danger",onClick:this.onSubmit,children:"Delete"})]})}},{key:"renderContent",value:function(){return this.props.user?"Are you sure you want to delete : ".concat(this.props.user.name):"Are you sure you want to delete?"}},{key:"render",value:function(){return Object(r.jsxs)(xe.a,{show:!0,onHide:function(){return g.push("/htecmms/users")},children:[Object(r.jsx)(xe.a.Header,{children:"Delete User"}),Object(r.jsx)(xe.a.Body,{children:this.renderContent()}),Object(r.jsx)(xe.a.Footer,{children:this.renderActions()})]})}}]),n}(s.a.Component),lt=Object(i.b)((function(e,t){return{user:e.users.user}}),{fetchUser:Xe,deleteUser:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={is_active:!1},t.next=4,Be.patch("/users/".concat(e,"/"),r,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 4:n({type:F,payload:e}),q("User Deletion Successful!"),g.push("/htecmms/users"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response&&401===t.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={is_active:!1},t.next=3,Be.patch("/users/".concat(e,"/"),r,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:n({type:F,payload:e}),q("User Deletion Successful!"),g.push("/htecmms/users");case 6:case"end":return t.stop()}}),t)})))).catch((function(e){J("Network Error!")}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(it),ut=function(e){return function(){var t=Object(v.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Y}),t.next=4,Be.get("/machine/status/data?"+e,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 4:r=t.sent,n({type:H,payload:r.data}),n({type:G}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response&&401===t.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be.get("/machine/status/data?"+e,{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:r=t.sent,n({type:H,payload:r.data});case 4:case"end":return t.stop()}}),t)})))).catch((function(e){J("Network Error!")}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},dt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).renderStatus=function(e){return"on"===e.status?Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"fas fa-circle",style:{color:"green",paddingRight:"5px"}}),"On"]}):Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"fas fa-circle",style:{color:"red",paddingRight:"5px"}}),"Off"]})},e.renderNetworkStatus=function(e){return"working"===e.network_status?Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"fas fa-circle",style:{color:"green",paddingRight:"5px"}}),"Good"]}):Object(r.jsxs)("span",{children:[Object(r.jsx)("i",{className:"fas fa-circle",style:{color:"red",paddingRight:"5px"}}),"Issue"]})},e.renderContent=function(){var t=[{title:"Section",field:"section_name"},{title:"Machine",field:"machine_name"},{title:"Status",field:"status",render:function(t){return e.renderStatus(t)}},{title:"Last Update",field:"last_update"},{title:"Network",field:"network_status",render:function(t){return e.renderNetworkStatus(t)}}];return void 0===e.props.data||0===e.props.data.length?Object(r.jsx)(oe,{}):Object(r.jsx)(ce.a,{title:"Live Machine Status",columns:t,data:e.props.data,options:{exportButton:!0,paging:!0,paginationType:"stepped"}})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getLiveStatus(),this.interval=setInterval(this.props.getLiveStatus,6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"card",children:Object(r.jsx)("div",{className:"card-body",children:this.renderContent()})})}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),ht=Object(i.b)((function(e){return{data:e.machine.live_data,isAuthenticated:e.fbAuth.isUserAuthenticated}}),{getLiveStatus:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.get("/machine/status",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:n=e.sent,t({type:z,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.get("/machine/status",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:n=e.sent,t({type:z,payload:n.data});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){J("Network Error!")}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})(dt),pt=n(214),jt=n(54),bt=n(702),mt=n(709),Ot=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={start_date:null,start_time:null,end_date:null,end_time:null,section:null,machines:null,machineList:null,shift:null},e.onSectionSelection=function(t){t.preventDefault();var n=parseInt(t.target.value),r=e.props.sections.filter((function(e){return e.id===n}));e.setState({section:n,machineList:r})},e.onMachineSelection=function(t){t.preventDefault();var n=Array.from(t.target.selectedOptions,(function(e){return parseInt(e.value)}));e.setState({machines:n})},e.onFormSubmit=function(t){if(t.preventDefault(),!e.state.start_date||!e.state.end_date)return J("You have to select date range!"),null;if(!e.state.start_time||!e.state.end_time)return J("You have to select time!"),null;if(!e.state.section)return J("You have to select section!"),null;var n="";e.state.section&&(n=n+"&section="+e.state.section),e.state.start_date&&(n=n+"&from="+e.state.start_date.toISOString().split("T")[0],e.state.start_time&&(n=n+"T"+e.state.start_time.hour()+":"+e.state.start_time.minute()+":00")),e.state.end_date&&(n=n+"&to="+e.state.end_date.toISOString().split("T")[0],e.state.end_time&&(n=n+"T"+e.state.end_time.hour()+":"+e.state.end_time.minute()+":00")),e.state.machines&&(n=n+"&machines="+e.state.machines.join(",")),e.props.getFilteredData(n),console.log("query string: query string",n.replace("?&","?"))},e.onClearSubmit=function(t){t.preventDefault(),e.setState({start_date:null,start_time:null,end_date:null,end_time:null,section:null,machines:null,machineList:null,shift:null})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.getSections()}},{key:"render",value:function(){var e=this;return this.props.sections?Object(r.jsxs)(s.a.Fragment,{children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h4",{className:"card-title",children:"Add Filter"})}),Object(r.jsx)("div",{className:"card-body",children:Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-3 pr-3",children:Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:"Section"}),Object(r.jsxs)("select",{className:"form-control",onChange:this.onSectionSelection,children:[Object(r.jsx)("option",{value:"100",children:" -- All --"}),this.props.sections.map((function(e){if("All"!==e.name)return Object(r.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(r.jsx)("div",{className:"col-md-2 pl-1",children:Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)(jt.a,{utils:pt.a,children:Object(r.jsx)(bt.a,{margin:"normal",id:"date-picker-dialog",label:"Select Date From",format:"YYYY-MM-DD",value:this.state.start_date,onChange:function(t){return e.setState({start_date:t})},KeyboardButtonProps:{"aria-label":"change date"}})})})}),Object(r.jsx)("div",{className:"col-md-2 pl-1",children:Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)(jt.a,{utils:pt.a,children:Object(r.jsx)(mt.a,{margin:"normal",id:"time-picker",label:"Select Time From",value:this.state.start_time,onChange:function(t){return e.setState({start_time:t})},KeyboardButtonProps:{"aria-label":"change time"}})})})}),Object(r.jsx)("div",{className:"col-md-2 pr-1",children:Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)(jt.a,{utils:pt.a,children:Object(r.jsx)(bt.a,{margin:"normal",id:"date-picker-dialog",label:"Select Date To",format:"YYYY-MM-DD",value:this.state.end_date,onChange:function(t){return e.setState({end_date:t})},KeyboardButtonProps:{"aria-label":"change date"}})})})}),Object(r.jsx)("div",{className:"col-md-2 pl-1",children:Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)(jt.a,{utils:pt.a,children:Object(r.jsx)(mt.a,{margin:"normal",id:"time-picker",label:"Select Time To",value:this.state.end_time,onChange:function(t){return e.setState({end_time:t})},KeyboardButtonProps:{"aria-label":"change time"}})})})})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-3 pl-1",children:Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("label",{children:"Machine"}),Object(r.jsxs)("select",{multiple:!0,className:"form-control",onChange:this.onMachineSelection,children:[Object(r.jsx)("option",{disabled:!0,value:"",children:" -- select a section --"}),this.state.machineList?this.state.machineList[0].machines.map((function(e){return Object(r.jsx)("option",{value:e.machine_no,children:e.name},e.machine_no)})):null]})]})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-4 pr-1",children:[Object(r.jsx)("button",{type:"submit",className:"btn btn-warning btn-fill pull-left mr-2",onClick:function(t){return e.onFormSubmit(t)},children:"Apply Filter"}),Object(r.jsx)("button",{type:"submit",className:"btn btn-danger btn-fill pull-left mr-2",onClick:function(t){return e.onClearSubmit(t)},children:"Clear"})]})})]})})]})})}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)(ie,{data:this.props.data,isLoading:this.props.onLoading})})]}):Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"card",children:Object(r.jsx)("div",{className:"card-body",children:Object(r.jsx)(oe,{})})})})}}]),n}(s.a.Component),ft=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated,machines:e.company.machines,sections:e.company.sections,data:e.machine.filtered_data,onLoading:e.machine.onLoading}}),{getMachines:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.get("/company/machines",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 3:n=e.sent,t({type:M,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&401===e.t0.response.status&&Z().then(Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be.get("/company/machines",{headers:{Authorization:"jwt "+localStorage.getItem("idToken")}});case 2:n=e.sent,t({type:M,payload:n.data});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){J("Network Error!")}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},getSections:$e,getFilteredData:ut})(Ot),vt=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onFilter=function(t){e.props.getFilteredData(t)},e}return Object(p.a)(n,[{key:"render",value:function(){return this.props.isAuthenticated?Object(r.jsx)(s.a.Fragment,{children:Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsx)(ft,{onFilter:this.onFilter})})}):Object(r.jsx)(d.a,{to:"/htecmms/phone-login"})}}]),n}(s.a.Component),xt=Object(i.b)((function(e){return{isAuthenticated:e.fbAuth.isUserAuthenticated,data:e.machine.filtered_data}}),{getFilteredData:ut})(vt);var gt=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(){return Object(r.jsx)(s.a.Fragment,{children:Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{path:"/htecmms",exact:!0,component:ht}),Object(r.jsx)(d.b,{path:"/htecmms/streams/new",exact:!0,component:be}),Object(r.jsx)(d.b,{path:"/htecmms/streams/edit/:id",exact:!0,component:ve}),Object(r.jsx)(d.b,{path:"/htecmms/streams/delete/:id",exact:!0,component:ye}),Object(r.jsx)(d.b,{path:"/htecmms/streams/:id",exact:!0,component:ke}),Object(r.jsx)(d.b,{path:"/htecmms/login/",exact:!0,component:Te}),Object(r.jsx)(d.b,{path:"/htecmms/phone-login",exact:!0,component:Ge}),Object(r.jsx)(d.b,{path:"/htecmms/logout",exact:!0,component:Ee}),Object(r.jsx)(d.b,{path:"/htecmms/users",exact:!0,component:rt}),Object(r.jsx)(d.b,{path:"/htecmms/users/edit/:id",exact:!0,component:st}),Object(r.jsx)(d.b,{path:"/htecmms/users/block-unblock/:id",exact:!0,component:ot}),Object(r.jsx)(d.b,{path:"/htecmms/users/delete/:id",exact:!0,component:lt}),Object(r.jsx)(d.b,{path:"/htecmms/machines/data",exact:!0,component:xt})]})})})),yt=n(470),kt=Object(i.b)(null,{userLogOut:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.getItem("token")&&q("Logged out successfully!"),t({type:A});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){var t=Object(a.useRef)(null);return Object(r.jsx)("div",{children:Object(r.jsx)(yt.a,{ref:t,timeout:216e6,onIdle:function(){console.log("User Idle")}})})}));var St,Nt,wt=function(){return console.log("env: ",Object({NODE_ENV:"production",PUBLIC_URL:"/htecmms",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MACHINE_STATUS_MANAGEMENT:"https://htecmms.herokuapp.com/api/v1",REACT_APP_MY_API_URL:"http://18.139.108.14",REACT_APP_REFRESH_TOKEN_URL:"https://securetoken.googleapis.com/v1/token?key=AIzaSyBx8sGQIsXKs4Ea6gAAC7BPkr8yFO6LZ_U"})),Object(r.jsxs)("div",{className:"wrapper",children:[Object(r.jsx)(kt,{}),Object(r.jsxs)(d.c,{history:g,children:[Object(r.jsx)(De,{}),Object(r.jsxs)("div",{className:"main-panel",children:[Object(r.jsx)(Ce,{}),Object(r.jsx)("div",{className:"content",children:Object(r.jsx)(gt,{})}),Object(r.jsx)(Fe,{})]})]})]})},_t=n(708),At=n(179),Tt={prev_link:null,next_link:null,results:{}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(te.a)(Object(te.a)({},e),{},{results:Object(te.a)(Object(te.a)({},e.results),Oe.a.mapKeys(t.payload,"id"))});case S:case y:case w:return Object(te.a)(Object(te.a)({},e),{},{results:Object(te.a)(Object(te.a)({},e.results),{},Object(At.a)({},t.payload.id,t.payload))});case N:var n=Oe.a.omit(e.results,t.payload);return Object(te.a)(Object(te.a)({},e),{},{results:Object(te.a)({},n)});default:return e}};localStorage.getItem("token")?(St=localStorage.getItem("token"),Nt=!0):(St=null,Nt=!1);var Et={isAuthenticated:Nt,token:St},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return t.payload.token?(localStorage.setItem("token",t.payload.token),{isAuthenticated:!0,token:t.payload.token}):(localStorage.removeItem("token"),{isAuthenticated:!1,token:null});case A:return localStorage.removeItem("token"),{isAuthenticated:!1,token:null};default:return e}},Ct={isUserAuthenticated:!!localStorage.getItem("idToken"),idToken:localStorage.getItem("idToken"),refreshToken:localStorage.getItem("refreshToken")},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(te.a)(Object(te.a)({},e),{},{isUserAuthenticated:!0,idToken:localStorage.getItem("idToken"),refreshToken:localStorage.getItem("refreshToken")});case U:return Object(te.a)(Object(te.a)({},e),{},{isUserAuthenticated:!0,idToken:t.payload.id_token,refreshToken:t.payload.refresh_token});case I:return localStorage.removeItem("idToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("name"),Object(te.a)(Object(te.a)({},e),{},{isUserAuthenticated:!1,idToken:null,refreshToken:null});default:return e}},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return console.log("fetch user reducer============"),console.log("users============",Object(te.a)(Object(te.a)({},e),t.payload)),Object(te.a)(Object(te.a)({},e),t.payload);case D:case C:case P:return Object(te.a)(Object(te.a)({},e),{},{user:Object(te.a)(Object(te.a)({},e.user),t.payload)});case B:return e;case F:var n=parseInt(t.payload);console.log("Id: ",n);var r=e.results.filter((function(e){return e.id!==n}));return console.log("result: ",r),Object(te.a)(Object(te.a)({},e),{},{results:r});case E:var a={groups:t.payload};return Object(te.a)(Object(te.a)({},e),a);default:return e}},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(te.a)(Object(te.a)({},e),{},{sections:t.payload});case M:return Object(te.a)(Object(te.a)({},e),{},{machines:t.payload});default:return e}},Pt={live_data:[],filtered_data:[],onLoading:!1},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(te.a)(Object(te.a)({},e),{},{live_data:t.payload});case H:return Object(te.a)(Object(te.a)({},e),{},{filtered_data:t.payload});case Y:return Object(te.a)(Object(te.a)({},e),{},{onLoading:!0});case G:return Object(te.a)(Object(te.a)({},e),{},{onLoading:!1});default:return e}},Mt=Object(l.c)({form:_t.a,streams:It,auth:Ut,fbAuth:Lt,users:Dt,company:Ft,machine:Rt}),Bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,zt=Object(l.e)(Mt,Bt(Object(l.a)(u.a)));o.a.render(Object(r.jsx)(i.a,{store:zt,children:Object(r.jsx)(wt,{})}),document.getElementById("root"))}},[[667,1,2]]]);
//# sourceMappingURL=main.c67e6eb8.chunk.js.map